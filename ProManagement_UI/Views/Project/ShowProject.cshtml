
@{
    ViewBag.Title = "ShowProject";
}
<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<script src="~/luluui/polyfill.js"></script>
<link href="~/luluui/ui.css" rel="stylesheet" />
<script>
    var pageindex = 1;
    var pagesize = 10;
    var pagecount = 0;
    var rowcount = 0;

    $(document).ready(function () {
        Load();
    });

    function Load(page) {
        $.ajax({
            url: '/Project/Getproject?Name=' + $("#selectEmpName").val() + '&PageIndex=' + page + '&PageSize=' + pagesize,
            type: 'get',
            datatype: 'json',
            success: function (data) {
                pageindex = data.PageIndex;
                pagesize = data.PageSize;
                pagecount = data.PageCount;
                rowcount = data.RowCount;
                $("#tbody").empty();
                var html = "";
                for (var i = 0; i < data.Data.length; i++) {
                    html +=
                        '<tr>' +
                        '<td style="text-align:center">' + data.Data[i].Id + '</td>' +
                        '<td style="text-align:center">' + data.Data[i].Name + '</td>' +
                        '<td style="text-align:center">' + data.Data[i].StartDates + '</td>' +
                        '<td style="text-align:center">' + data.Data[i].PlanEndDates + '</td>' +
                        '<td style="text-align:center">' + data.Data[i].AName + '</td>' +
                        '<td style="text-align:center">' + data.Data[i].EmpIn + '</td>' +
                        '<td style="text-align:center">' + data.Data[i].CName + '</td>' +
                    '<td style="text-align:center"><a href="' + data.Data[i].AccessUrl + '">附件</a></td>' +
                        '<td style="text-align:center"><input type="checkbox" id="switch"><label class="ui-switch" for="switch"></label></td>' +
                        '</tr>'
                }
                $("#tbody").append(html);
            }
        })
    }

    function Select() {
        Load();
    }
    function AddProject() {
        location.href = '/Project/AddProject';
    }
    function Addemployees() {
        location.href = '/Project/';
    }
    function Project() {
        Load();
    }

    function Page(page) {
        Load(page);
    }

</script>
<h2>项目管理系统平台</h2>
<div style="margin-left:50px;margin-top:40px">
    <table>
        <tr>
            <td style="width:205px">
                <span class="ui-input ui-input-search">
                    <input type="search" id="selectEmpName">
                    <a href="javascript:" class="ui-icon-search">查询项目名称</a>
                </span>
            </td>
            <td>
                &nbsp;
                <button class="ui-button" data-type="primary" onclick="Select()">查 询</button>
                <button class="ui-button" data-type="success" onclick="AddProject()">添加项目</button>
                <button class="ui-button" data-type="success" onclick="Addemployees()">添加员工</button>
            </td>
        </tr>
    </table>
    <br />
    <table class="table-bordered" style="width:1000px;height:300px">
        <tr>
            <td style="width:110px;height:400px">
                
                <div style="padding:10px;margin-top:20px">
                    <button class="ui-button" style="top:20px;padding:10px" data-type="primary" onclick="Project()">项目管理</button>
                </div>
            </td>
            <td style="width:900px">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <td style="text-align:center">序号</td>
                            <td style="text-align:center">项目名称</td>
                            <td style="text-align:center">项目开始日期</td>
                            <td style="text-align:center">项目预计结束日期</td>
                            <td style="text-align:center">第一责任人</td>
                            <td style="text-align:center">参与人</td>
                            <td style="text-align:center">类型</td>
                            <td style="text-align:center">附件</td>
                            <td style="text-align:center">操作</td>
                        </tr>
                    </thead>
                    <tbody id="tbody"></tbody>
                </table>
            </td>
        </tr>
    </table>
</div>
<div style="margin-left:50px;margin-top:20px">
    <table>
        <tr>
            <td colspan="2" style="height:30px">
                <div style="float:right;height:50px">
                    <a href="#" class="ui-button" data-type="primary" onclick="Page(1)">首页</a>
                    <a href="#" class="ui-button" data-type="primary" onclick="Page(pageindex - 1 <= 0 ? 1 : pageindex - 1)">上一页</a>
                    <a href="#" class="ui-button" data-type="primary" onclick="Page(pageindex + 1 >= pagecount ? pagecount : pageindex + 1)">下一页</a>  
                    <a href="#" class="ui-button" data-type="primary" onclick="Page(pagecount)">尾页</a>
                </div>
            </td>
        </tr>
    </table>
</div>